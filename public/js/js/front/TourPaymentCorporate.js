"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[29],{80289:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var r=a(97991),o=a(50175);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const i={name:"Tour-list",components:{"vue-recaptcha":r.Z,"has-error":o.HasError},data:function(){var e;return s(e={chequePage:!1,response:"",price:"",tours:"",formShow:!1,payment_mode:"self",self_pay_mode:"cheque",teacher_section:!1,student_section:!1,student_bank:[],bankdetail:[],banknames:[],tour_info:"",userinfo:"",robot:!1,teacherform:{payment_mode:"self",payment_type:"",tour_code:"",corp_bankdetails_id:"",amount:"",user_id:"",company_id:"",cheque_bank_name:"",date_of_issue:"",ifsc_code:"",cheque_number:""},form:new o.Form({name:"",bank_name:"",account_number:"",account_type:"",ifsc_code:"",tour_code:this.tour_id}),account_type:["Current Account","Saving Account","Recurring Deposit Account","Fixed Deposit Account"]},"banknames",[]),s(e,"tour_id",""),e},mounted:function(){""!=this.$store.state.paymentData?(this.tour_id=this.$store.state.paymentData.tour_id,this.userinfo=this.$cookies.get("user"),this.teacherform.company_id=this.userinfo.company_id,this.tourBank(),this.userData()):this.$router.push("/tour-list")},methods:{onVerify:function(e){e&&(this.robot=!0)},onCaptchaExpired:function(){this.$refs.recaptcha.reset()},tourBank:function(){var e=this;this.$axios.post("/api/tour-bankdetail",[],{headers:{Authorization:"Bearer ".concat(this.$cookies.get("access_token"))}}).then((function(t){e.bankdetail=t.data})).catch((function(t){e.formShow=!0,e.handleError(t)}))},userData:function(){var e=this,t={travel_code:this.tour_id};this.$axios.post("/api/payment-tour",t,{headers:{Authorization:"Bearer ".concat(this.$cookies.get("access_token"))}}).then((function(t){console.log(t),e.tour_info=t.data,e.teacherform.user_id=t.data.user_id,e.teacherform.amount=t.data.price,e.price=e.teacherform.amount,"corporate"==e.userinfo.client_type&&e.bankNameList()})).catch((function(t){e.handleError(t)}))},ModalForm:function(){var e=this;this.$axios.post("/api/tour-bankdetail-store",this.form,{headers:{Authorization:"Bearer ".concat(this.$cookies.get("access_token"))}}).then((function(t){e.form.reset(),e.tourBank(),e.$swal.fire({icon:"success",title:"Beneficary Added !!"})})).catch((function(t){e.handleError(t)}))},submitPayment:function(){return this.teacherform.tour_code=this.tour_id,"corporate"==this.tour_info.client_type?this.teacherform.amount=this.tour_info.price*this.tour_info.no_of_person:this.teacherform.amount=this.tour_info.price,this.teacherform.user_id=this.tour_info.user_id,0==this.robot?(this.$swal.fire({icon:"error",title:"Try Again !!"}),!1):("self"==this.teacherform.payment_mode&&"cheque"==this.teacherform.payment_type&&(this.teacherform.corp_bankdetails_id="",this.chequePage=!0),"self"==this.teacherform.payment_mode&&"dd"==this.teacherform.payment_type&&(this.teacherform.corp_bankdetails_id="",this.chequePage=!0),"self"==this.teacherform.payment_mode&&"cash"==this.teacherform.payment_type&&(this.teacherform.corp_bankdetails_id="",this.submitForm()),"student"==this.teacherform.payment_mode&&""!=this.teacherform.corp_bankdetails_id&&(this.teacherform.payment_type="",this.submitForm()),!1)},bankNameList:function(){var e=this;this.$axios.get("/api/banknames").then((function(t){e.banknames=t.data}))},submitForm:function(){var e=this;this.$axios.post("/api/tour-submit-payment",this.teacherform,{headers:{Authorization:"Bearer ".concat(this.$cookies.get("access_token"))}}).then((function(t){if(t.data.error)return e.$swal.fire({icon:"error",title:t.data.error}),!1;e.$swal.fire({icon:"success",title:"Successfully Added !!"}),e.$router.push("/tour-list")})).catch((function(t){e.handleError(t)}))},onlinePayment:function(){if(0==this.robot)return this.$swal.fire({icon:"error",title:"Try Again !!"}),!1;var e=s({user_id:"",travel_code:"",tour_id:"",company_id:"",price:"",no_of_person:"",base_price:0,paid_person:0,unpaid_person:0,total_members:0},"price",0);e.user_id=this.tour_info.user_id,e.paid_person=this.tour_info.paid_person,e.unpaid_person=this.tour_info.unpaid_person,e.total_members=this.tour_info.total_members,e.base_price=this.tour_info.base_price,e.price=this.tour_info.price,e.travel_code=this.tour_info.travel_code,e.tour_id=this.tour_id,e.company_id=this.userinfo.company_id,this.$cookies.set("payment-data",e,3600),this.$router.push("/payment-billing")},backReset:function(){this.chequePage=!1,this.teacherform.cheque_bank_name="",this.teacherform.date_of_issue="",this.teacherform.ifsc_code="",this.teacherform.cheque_number=""},validateCheque:function(){""!=this.teacherform.cheque_bank_name&&""!=this.teacherform.date_of_issue&&""!=this.teacherform.ifsc_code&&""!=this.teacherform.cheque_number?this.submitForm():this.$swal.fire({icon:"error",title:"Please fill all the fields !!"})}}};const n=(0,a(51900).Z)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb-4",attrs:{id:"tour_payment"}},[0==e.chequePage?a("div",[e.tour_info?a("div",{staticClass:"container p-t-15 mb-20"},[a("form",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"text-muted",attrs:{for:"tour_code"}},[e._v("Travel Code")]),e._v(" "),a("p",[e._v(e._s(e.tour_info.travel_code))])]),e._v(" "),a("div",{staticClass:"col-sm-4 text-center"},[a("label",{staticClass:"text-muted",attrs:{for:"price"}},[e._v("Base Price")]),e._v(" "),a("p",[e._v("\n              "+e._s(e.tour_info.base_price)+" /-\n            ")])]),e._v(" "),a("div",{staticClass:"col-sm-4 text-center"},[a("label",{staticClass:"text-muted",attrs:{for:"price"}},[e._v("Total Price")]),e._v(" "),a("p",[e._v("\n              "+e._s(e.tour_info.price)+" /-\n            ")])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"text-muted",attrs:{for:"person"}},[e._v("Total Number of people")]),e._v(" "),a("p",[e._v(e._s(e.tour_info.total_members))])]),e._v(" "),a("div",{staticClass:"col-sm-4 text-center"},[a("label",{staticClass:"text-muted",attrs:{for:"person"}},[e._v("Paid Members")]),e._v(" "),a("p",[e._v(e._s(e.tour_info.paid_person))])]),e._v(" "),a("div",{staticClass:"col-sm-4 text-center"},[a("label",{staticClass:"text-muted",attrs:{for:"person"}},[e._v("Complimentary")]),e._v(" "),a("p",[e._v(e._s(e.tour_info.unpaid_person))])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("label",{attrs:{for:"payment_mode mt-20"}},[e._v("Payment Mode")]),e._v(" "),a("div",{staticClass:"teacher-section"},[a("div",{staticClass:"form-check-inline"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.payment_mode,expression:"teacherform.payment_mode"}],staticClass:"form-check-input",attrs:{type:"radio",value:"self",name:"payment_mode"},domProps:{checked:e._q(e.teacherform.payment_mode,"self")},on:{change:function(t){return e.$set(e.teacherform,"payment_mode","self")}}}),e._v("By Company\n                ")])])])])]),e._v(" "),"self"==e.teacherform.payment_mode?a("div",{staticClass:"row mt-20"},[a("div",{staticClass:"col-sm-3"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.payment_type,expression:"teacherform.payment_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"option",value:"cheque"},domProps:{checked:e._q(e.teacherform.payment_type,"cheque")},on:{change:function(t){return e.$set(e.teacherform,"payment_type","cheque")}}}),e._v("\n                Cheque/DD\n              ")])])]),e._v(" "),a("div",{staticClass:"col-sm-3"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.payment_type,expression:"teacherform.payment_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"option",value:"dd"},domProps:{checked:e._q(e.teacherform.payment_type,"dd")},on:{change:function(t){return e.$set(e.teacherform,"payment_type","dd")}}}),e._v("\n                DD\n              ")])])]),e._v(" "),a("div",{staticClass:"col-sm-3"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.payment_type,expression:"teacherform.payment_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"option",value:"cash"},domProps:{checked:e._q(e.teacherform.payment_type,"cash")},on:{change:function(t){return e.$set(e.teacherform,"payment_type","cash")}}}),e._v("\n                Cash\n              ")])])]),e._v(" "),a("div",{staticClass:"col-sm-3"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.payment_type,expression:"teacherform.payment_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"option",value:"net"},domProps:{checked:e._q(e.teacherform.payment_type,"net")},on:{change:function(t){return e.$set(e.teacherform,"payment_type","net")}}}),e._v("\n                Net Banking\n              ")])])])]):e._e(),e._v(" "),a("div",{staticClass:"row mt-20"},[a("div",{staticClass:"col-sm-18"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"robot"}},[e._v("RObOt?")]),e._v(" "),a("div",{staticClass:"col-sm-10"},[a("vue-recaptcha",{ref:"recaptcha",attrs:{loadRecaptchaScript:!0,sitekey:"6LeyF7gZAAAAADBt5N6EDQqFhL4-DZBUC13NgDpT"},on:{expired:e.onCaptchaExpired,verify:e.onVerify}})],1)])]),e._v(" "),a("div",{staticClass:"row justify-content-center mt-5"},["net"==e.teacherform.payment_type?a("button",{staticClass:"btn btn-outline-primary btn-square ml-2",attrs:{type:"button"},on:{click:function(t){return e.onlinePayment()}}},[e._v("\n            SUBMIT\n          ")]):a("button",{staticClass:"btn btn-outline-primary btn-square",attrs:{type:"button"},on:{click:function(t){return e.submitPayment()}}},[e._v("\n            SUBMIT\n          ")])])]),e._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"openModal"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content modal-color"},[a("div",{staticClass:"modal-body"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n                ×\n              ")]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"no_row"}},[e._v("Beneficary Name")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"form-control grey-border",class:{"is-invalid":e.form.errors.has("name")},attrs:{type:"text",name:"name",placeholder:"Enter Beneficary Name"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"name"}})],1)]),e._v(" "),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"no_row"}},[e._v("Select Bank")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.bank_name,expression:"form.bank_name"}],staticClass:"form-control grey-border",class:{"is-invalid":e.form.errors.has("bank_name")},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"bank_name",t.target.multiple?a:a[0])}}},e._l(e.banknames,(function(t){return a("option",{key:t.id,domProps:{value:t.name}},[e._v("\n                        "+e._s(t.name)+"\n                      ")])})),0),e._v(" "),a("has-error",{attrs:{form:e.form,field:"bank_name"}})],1)]),e._v(" "),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"no_row"}},[e._v("Account Number")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.account_number,expression:"form.account_number"}],staticClass:"form-control grey-border",class:{"is-invalid":e.form.errors.has("account_number")},attrs:{type:"number",placeholder:"Enter Account Number",name:"account_number"},domProps:{value:e.form.account_number},on:{input:function(t){t.target.composing||e.$set(e.form,"account_number",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"account_number"}})],1)]),e._v(" "),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"no_row"}},[e._v("Account Type")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.account_type,expression:"form.account_type"}],staticClass:"form-control grey-border",class:{"is-invalid":e.form.errors.has("account_type")},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"account_type",t.target.multiple?a:a[0])}}},e._l(e.account_type,(function(t){return a("option",{key:t,domProps:{value:t}},[e._v("\n                        "+e._s(t)+"\n                      ")])})),0),e._v(" "),a("has-error",{attrs:{form:e.form,field:"account_type"}})],1)]),e._v(" "),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"no_row"}},[e._v("IFSC Code")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.ifsc_code,expression:"form.ifsc_code"}],staticClass:"form-control grey-border",class:{"is-invalid":e.form.errors.has("ifsc_code")},attrs:{type:"text",placeholder:"Enter IFSC Code",name:"ifsc_code"},domProps:{value:e.form.ifsc_code},on:{input:function(t){t.target.composing||e.$set(e.form,"ifsc_code",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"ifsc_code"}})],1)])]),e._v(" "),a("p",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-outline-primary btn-square",attrs:{type:"button"},on:{click:function(t){return e.ModalForm()}}},[e._v("\n                  ADD\n                ")])])])])])])]):e._e()]):e._e(),e._v(" "),1==e.chequePage?a("div",[a("div",{staticClass:"container pt-20"},[a("p",[e._v("Please Fill Cheque/DD Details..")]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"father_name"}},[e._v("Bank Name")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.cheque_bank_name,expression:"teacherform.cheque_bank_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.teacherform.cheque_bank_name},on:{input:function(t){t.target.composing||e.$set(e.teacherform,"cheque_bank_name",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"father_name"}},[e._v("Date of Issue")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.date_of_issue,expression:"teacherform.date_of_issue"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:e.teacherform.date_of_issue},on:{input:function(t){t.target.composing||e.$set(e.teacherform,"date_of_issue",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"father_name"}},[e._v("IFSC Code")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.ifsc_code,expression:"teacherform.ifsc_code"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.teacherform.ifsc_code},on:{input:function(t){t.target.composing||e.$set(e.teacherform,"ifsc_code",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"father_name"}},[e._v("Cheque Number")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.cheque_number,expression:"teacherform.cheque_number"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.teacherform.cheque_number},on:{input:function(t){t.target.composing||e.$set(e.teacherform,"cheque_number",t.target.value)}}})])])]),e._v(" "),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-outline-primary btn-square",attrs:{type:"button"},on:{click:function(t){return e.backReset()}}},[e._v("\n          BACK\n        ")]),e._v(" "),a("button",{staticClass:"btn btn-outline-primary btn-square",attrs:{type:"button"},on:{click:function(t){return e.validateCheque()}}},[e._v("\n          SUBMIT\n        ")])])])]):e._e()])}),[],!1,null,null,null).exports},97991:(e,t,a)=>{function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},r.apply(this,arguments)}a.d(t,{Z:()=>m});var o=Object.prototype.hasOwnProperty;var s,i,n,c=(s=!1,i=[],n={resolved:function(){return s},resolve:function(e){if(!s){s=!0;for(var t=0,a=i.length;t<a;t++)i[t](e)}},promise:{then:function(e){s?e():i.push(e)}}},{notify:function(){n.resolve()},wait:function(){return n.promise},render:function(e,t,a){this.wait().then((function(){a(window.grecaptcha.render(e,t))}))},reset:function(e){void 0!==e&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.reset(e)})))},execute:function(e){void 0!==e&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.execute(e)})))},checkRecaptchaLoad:function(){o.call(window,"grecaptcha")&&o.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!n.resolved())throw new Error("ReCAPTCHA has not been loaded")}});"undefined"!=typeof window&&(window.vueRecaptchaApiLoaded=c.notify);const m={name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!1},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},beforeMount:function(){if(this.loadRecaptchaScript&&!document.getElementById(this.recaptchaScriptId)){var e=document.createElement("script");e.id=this.recaptchaScriptId,e.src="https://"+this.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+this.language,e.async=!0,e.defer=!0,document.head.appendChild(e)}},mounted:function(){var e=this;c.checkRecaptchaLoad();var t=r({},this.$props,{callback:this.emitVerify,"expired-callback":this.emitExpired,"error-callback":this.emitError}),a=this.$slots.default?this.$el.children[0]:this.$el;c.render(a,t,(function(t){e.$widgetId=t,e.$emit("render",t)}))},methods:{reset:function(){c.reset(this.$widgetId)},execute:function(){c.execute(this.$widgetId)},emitVerify:function(e){this.$emit("verify",e)},emitExpired:function(){this.$emit("expired")},emitError:function(){this.$emit("error")}},render:function(e){return e("div",{},this.$slots.default)}}}}]);