(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{15:function(t,e,a){"use strict";var o=a(0),s=Object(o.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"btn btn-primary itrn_add_btn back_btn text-uppercase font-weight-bold"},[this._t("default",[this._v("submit")])],2)}),[],!1,null,null,null);e.a=s.exports},17:function(t,e,a){"use strict";var o={props:["url"],methods:{goBack:function(){this.$router.back()}}},s=a(0),r=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.url?a("router-link",{staticClass:"btn btn-primary itrn_add_btn back_btn text-uppercase font-weight-bold",attrs:{to:t.url},on:{click:function(e){return t.goBack()}}},[t._t("default",[t._v("Back")])],2):a("button",{staticClass:"btn btn-primary itrn_add_btn back_btn text-uppercase font-weight-bold",attrs:{type:"button"},on:{click:function(e){return t.goBack()}}},[t._t("default",[t._v("Back")])],2)],1)}),[],!1,null,null,null);e.a=r.exports},270:function(t,e,a){"use strict";a.r(e);var o=a(1),s=a(14),r=a(4),i=a(3),l={name:"New",components:{Form:o.Form,"has-error":o.HasError,ModelSelect:s.ModelSelect,"form-buttons":r.a,"form-layout":i.a},data:function(){return{options:[],schools:[],images:[],form:new o.Form({category:"",title:"",school_id:"",images:[]})}},mounted:function(){this.getGalleryList(),this.getSchools()},methods:{getGalleryList:function(){var t=this;axios.get("/api/gallery/".concat(this.$route.params.id,"/edit")).then((function(e){setTimeout((function(){return $("#example").DataTable()}),1e3),t.form.fill(e.data),t.form.school_id=parseInt(e.data.school_id),t.form.images=[],t.images=e.data.images}))},getSchools:function(){var t=this;axios.get("/api/school").then((function(e){for(var a=0;a<e.data.data.length;a++)t.schools.push({value:e.data.data[a].id,text:e.data.data[a].school_name})}))},updateGallery:function(){var t=this;this.form.put("/api/gallery/".concat(this.$route.params.id)).then((function(e){t.getGalleryList(),t.$swal.fire({icon:"success",title:"Successfully Updated"})})).catch((function(){}))},changePhoto:function(t){for(var e=this,a=function(){var a=t.target.files[o],s=new FileReader;s.onload=function(t){e.form.images.push({name:a.name,file:t.target.result})},s.readAsDataURL(a)},o=0;o<t.target.files.length;o++)a()},deleteImage:function(t){var e=this,a={id:t};axios.post("/api/gallery-img-delete",a).then((function(t){e.getGalleryList()}))},imagePath:function(){return"/images/gallery/"+this.form.image},back:function(){this.$router.push("/gallery")}}},n=a(0),c=Object(n.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form-layout",{scopedSlots:t._u([{key:"formdata",fn:function(){return[a("form",{attrs:{role:"form",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.updateGallery()}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"category"}},[t._v("Gallery Category")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.category,expression:"form.category"}],staticClass:"form-control select-field",class:{"is-invalid":t.form.errors.has("category")},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"category",e.target.multiple?a:a[0])}}},[a("option",{attrs:{default:"default",value:"",hidden:""}},[t._v("Select Category")]),t._v(" "),a("option",{attrs:{value:"domestic"}},[t._v("Domestic")]),t._v(" "),a("option",{attrs:{value:"international"}},[t._v("International")])]),t._v(" "),a("has-error",{attrs:{form:t.form,field:"category"}})],1)]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"category"}},[t._v("Gallery Title")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text",options:t.options,placeholder:"Select Itinerary"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"title"}})],1)]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"category"}},[t._v("School")]),t._v(" "),a("model-select",{attrs:{options:t.schools,placeholder:"Select School"},model:{value:t.form.school_id,callback:function(e){t.$set(t.form,"school_id",e)},expression:"form.school_id"}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"school_id"}})],1)])]),t._v(" "),a("div",{staticClass:"row img-card-delete-icon"},t._l(t.images,(function(e){return a("div",{key:e.id,staticClass:"col-sm-4 position-relative"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("img",{staticClass:"w-100",attrs:{src:"/images/gallery/"+e.path}})])]),t._v(" "),a("span",{staticClass:"badge badge-danger position-absolute cursor-pointer",on:{click:function(a){return t.deleteImage(e.id)}}},[a("i",{staticClass:"far fa-trash-alt",attrs:{"aria-hidden":"true"}})])])})),0),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"images"}},[t._v("Select Multiple Images")]),t._v(" "),a("input",{ref:"attachments",staticClass:"form-control w-100",attrs:{type:"file",multiple:"multiple"},on:{change:t.changePhoto}})])])]),t._v(" "),a("form-buttons")],1)]},proxy:!0}])})}),[],!1,null,null,null);e.default=c.exports},3:function(t,e,a){"use strict";var o=a(0),s=Object(o.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row justify-content-around"},[e("div",{staticClass:"col-md-12 pl-4 pb-5"},[this._t("formdata")],2)])])])}),[],!1,null,null,null);e.a=s.exports},4:function(t,e,a){"use strict";var o=a(17),s=a(15),r={components:{"back-button":o.a,"submit-button":s.a}},i=a(0),l=Object(i.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-sm-8"},[e("back-button"),this._v(" "),e("submit-button")],1)])}),[],!1,null,null,null);e.a=l.exports}}]);