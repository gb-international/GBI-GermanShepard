(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{15:function(t,o,e){"use strict";var a=e(0),s=Object(a.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"btn btn-primary itrn_add_btn back_btn text-uppercase font-weight-bold"},[this._t("default",[this._v("submit")])],2)}),[],!1,null,null,null);o.a=s.exports},17:function(t,o,e){"use strict";var a={props:["url"],methods:{goBack:function(){this.$router.back()}}},s=e(0),r=Object(s.a)(a,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("span",[t.url?e("router-link",{staticClass:"btn btn-primary itrn_add_btn back_btn text-uppercase font-weight-bold",attrs:{to:t.url},on:{click:function(o){return t.goBack()}}},[t._t("default",[t._v("Back")])],2):e("button",{staticClass:"btn btn-primary itrn_add_btn back_btn text-uppercase font-weight-bold",attrs:{type:"button"},on:{click:function(o){return t.goBack()}}},[t._t("default",[t._v("Back")])],2)],1)}),[],!1,null,null,null);o.a=r.exports},287:function(t,o,e){"use strict";e.r(o);var a=e(14),s=e(21),r=e.n(s),i=e(1),n=e(16),l=e(4),c=e(3),d={name:"EditItinerary",components:{Form:i.Form,ModelSelect:a.ModelSelect,Multiselect:r.a,"has-error":i.HasError,"vue-editor":n.a,"form-buttons":l.a,"form-layout":c.a},data:function(){return{cities:[],sources:"",destinations:"",itinerarydays:[],tour_type_list:[],selected:null,photo:"",detail_photo:"",form:new i.Form({source:"",destination:"",noofdays:"",title:"",description:"",tourtype:"",hotel_type:"",photo:"",photo_alt:"",detail_photo:"",detail_photo_alt:"",food:"",train:"",bus:"",flight:"",transport:"",tourtypes:[],itinerarydays:[{day:1,day_source:"",day_destination:"",day_description:""}]})}},created:function(){this.itineraryList(),this.cityList(),this.tourTypeData()},methods:{itineraryList:function(){var t=this;axios.get("/api/itinerary/".concat(this.$route.params.itineraryid,"/edit")).then((function(o){setTimeout((function(){return $("#example").DataTable()}),1e3),t.form.fill(o.data),t.form.photo="",t.form.detail_photo="",t.photo="/uploadimage/"+o.data.photo,t.detail_photo="/uploadimage/"+o.data.detail_photo;for(var e=o.data.itinerarydays,a=0;a<e.length;a++)t.itinerarydays.length!=e.length&&t.itinerarydays.push({day:e[a].day,day_source:e[a].day_source,day_destination:e[a].day_destination,day_description:e[a].day_description});t.img_photo="/uploadimage/"+t.form.photo,t.img_detail_photo="/uploadimage/"+t.form.detail_photo}))},cityList:function(){var t=this;axios.get("/api/city").then((function(o){t.cities=o.data.data}))},tourTypeData:function(){var t=this;axios.get("/api/tourtype").then((function(o){t.tour_type_list=o.data}))},changePhoto:function(t){var o=this,e=t.target.files[0],a=new FileReader;a.onload=function(t){o.form.photo=t.target.result,o.form.photo_alt=e.name,o.photo=t.target.result},a.readAsDataURL(e)},changeDetailPhoto:function(t){var o=this,e=t.target.files[0],a=new FileReader;a.onload=function(t){o.form.detail_photo=t.target.result,o.form.detail_photo_alt=e.name,o.detail_photo=t.target.result},a.readAsDataURL(e)},updateItinerary:function(){var t=this;console.log(this.form),localStorage.setItem("noofdays",this.form.noofdays),1!=this.form.bus&&1!=this.form.train&&1!=this.form.flight||(this.form.transport="1");for(var o=0;o<this.itinerarydays.length;o++){if(""==this.itinerarydays[o].day_source||""==this.itinerarydays[o].day_destination||""==this.itinerarydays[o].day_description)return this.$toast.fire({icon:"error",title:"Make sure you fill all the fields"}),!1;this.form.itinerarydays[o].day_source=this.itinerarydays[o].day_source,this.form.itinerarydays[o].day_destination=this.itinerarydays[o].day_destination,this.form.itinerarydays[o].day_description=this.itinerarydays[o].day_description}this.form.put("/api/itinerary/".concat(this.$route.params.itineraryid)).then((function(o){t.$toast.fire({icon:"success",title:"Itinerary Updated successfully"})})).catch((function(){}))},addRow:function(){this.form.noofdays+=1;var t=this.form.itinerarydays.length;this.itinerarydays.push({day:t+1,day_source:"",day_destination:"",day_description:""}),this.form.itinerarydays.push({day:t+1,day_source:"",day_destination:"",day_description:""})},removeRow:function(){if(0==this.form.noofdays)return!1;this.form.noofdays-=1;var t=this.form.itinerarydays.length-1;this.itinerarydays.splice(t,1)}}},u=e(0),m=Object(u.a)(d,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("form-layout",{scopedSlots:t._u([{key:"formdata",fn:function(){return[e("form",{attrs:{role:"form",enctype:"multipart/form-data"},on:{submit:function(o){return o.preventDefault(),t.updateItinerary()}}},[e("div",{staticClass:"row mb-30"},[e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"sourceId"}},[t._v("Source")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.source,expression:"form.source"}],staticClass:"form-control select-field",on:{change:function(o){var e=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"source",o.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",disabled:"",hidden:""}},[t._v("Select Source")]),t._v(" "),t._l(t.cities,(function(o){return e("option",{key:o.id,domProps:{value:o.name}},[t._v(t._s(o.name))])}))],2),t._v("\n            "+t._s(t.form.source)+"\n            "),t._v(" "),e("has-error",{attrs:{form:t.form,field:"source"}})],1)]),t._v(" "),e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"destinationId"}},[t._v("Destination")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.destination,expression:"form.destination"}],staticClass:"form-control select-field",on:{change:function(o){var e=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"destination",o.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",disabled:"",hidden:""}},[t._v("Select Destination")]),t._v(" "),t._l(t.cities,(function(o){return e("option",{key:o.id,domProps:{value:o.name}},[t._v(t._s(o.name))])}))],2),t._v("\n            "+t._s(t.form.destination)+"\n            "),t._v(" "),e("has-error",{attrs:{form:t.form,field:"destination"}})],1)]),t._v(" "),e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"noofdaysId"}},[t._v("Number Of Days")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.noofdays,expression:"form.noofdays"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("noofdays")},attrs:{type:"text",readonly:"readonly",placeholder:"Enter Number Of Days",name:"noofdays",min:"1"},domProps:{value:t.form.noofdays},on:{input:function(o){o.target.composing||t.$set(t.form,"noofdays",o.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"noofdays"}})],1)]),t._v(" "),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn_plus text-white mt-35",attrs:{type:"button"},on:{click:function(o){return t.addRow()}}},[e("i",{staticClass:"fas fa-plus"})])]),t._v(" "),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn_plus text-white mt-35",attrs:{type:"button"},on:{click:function(o){return t.removeRow()}}},[e("i",{staticClass:"fas fa-minus"})])])])])]),t._v(" "),e("div",{staticClass:"row mb-30"},[e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"tourtypeId"}},[t._v("Tour Type")]),t._v(" "),e("div",[e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tourtype,expression:"form.tourtype"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"NationalId",value:"National",name:"tourtype"},domProps:{checked:t._q(t.form.tourtype,"National")},on:{change:function(o){return t.$set(t.form,"tourtype","National")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"NationalId"}},[t._v("National")])]),t._v(" "),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tourtype,expression:"form.tourtype"}],staticClass:"custom-control-input",attrs:{type:"radio",value:"International",id:"InternationalId",name:"tourtype"},domProps:{checked:t._q(t.form.tourtype,"International")},on:{change:function(o){return t.$set(t.form,"tourtype","International")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"InternationalId"}},[t._v("International")])])]),t._v(" "),t.form.errors.has("tourtype")?e("div",{staticClass:"error"},[t._v("\n              "+t._s(t.form.errors.get("tourtype"))+"\n            ")]):t._e()])]),t._v(" "),e("div",{staticClass:"col-sm-5"},[e("div",{staticClass:"form-group aligen_top_input"},[e("label",{attrs:{for:"hotel_type"}},[t._v("Hotel Type")]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.hotel_type,expression:"form.hotel_type"}],staticClass:"custom-control-input",class:{"is-invalid":t.form.errors.has("hotel_type")},attrs:{type:"radio",id:"nohotelRadio",value:"0",name:"hotel_type"},domProps:{checked:t._q(t.form.hotel_type,"0")},on:{change:function(o){return t.$set(t.form,"hotel_type","0")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"nohotelRadio"}},[t._v("No Hotel")])]),t._v(" "),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.hotel_type,expression:"form.hotel_type"}],staticClass:"custom-control-input",class:{"is-invalid":t.form.errors.has("hotel_type")},attrs:{type:"radio",id:"hotelRadio",value:"3",name:"hotel_type"},domProps:{checked:t._q(t.form.hotel_type,"3")},on:{change:function(o){return t.$set(t.form,"hotel_type","3")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"hotelRadio"}},[t._v("3 Star")])]),t._v(" "),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.hotel_type,expression:"form.hotel_type"}],staticClass:"custom-control-input",class:{"is-invalid":t.form.errors.has("hotel_type")},attrs:{type:"radio",id:"hotelRadio1",name:"hotel_type",value:"4"},domProps:{checked:t._q(t.form.hotel_type,"4")},on:{change:function(o){return t.$set(t.form,"hotel_type","4")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"hotelRadio1"}},[t._v("4 Star")])]),t._v(" "),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.hotel_type,expression:"form.hotel_type"}],staticClass:"custom-control-input",class:{"is-invalid":t.form.errors.has("hotel_type")},attrs:{type:"radio",id:"hotelRadio2",name:"hotel_type",value:"5"},domProps:{checked:t._q(t.form.hotel_type,"5")},on:{change:function(o){return t.$set(t.form,"hotel_type","5")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"hotelRadio2"}},[t._v("5 Star")])]),t._v(" "),e("has-error",{attrs:{form:t.form,field:"hotel_type"}})],1)]),t._v(" "),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"mode_of_transport"}},[t._v("Mode of Transport")]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.flight,expression:"form.flight"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"transport","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.form.flight)?t._i(t.form.flight,null)>-1:t._q(t.form.flight,"1")},on:{change:function(o){var e=t.form.flight,a=o.target,s=a.checked?"1":"0";if(Array.isArray(e)){var r=t._i(e,null);a.checked?r<0&&t.$set(t.form,"flight",e.concat([null])):r>-1&&t.$set(t.form,"flight",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.form,"flight",s)}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"transport"}},[t._v("Flight")])]),t._v(" "),e("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.bus,expression:"form.bus"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"transport1","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.form.bus)?t._i(t.form.bus,null)>-1:t._q(t.form.bus,"1")},on:{change:function(o){var e=t.form.bus,a=o.target,s=a.checked?"1":"0";if(Array.isArray(e)){var r=t._i(e,null);a.checked?r<0&&t.$set(t.form,"bus",e.concat([null])):r>-1&&t.$set(t.form,"bus",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.form,"bus",s)}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"transport1"}},[t._v("Bus")])]),t._v(" "),e("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.train,expression:"form.train"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"transport2","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.form.train)?t._i(t.form.train,null)>-1:t._q(t.form.train,"1")},on:{change:function(o){var e=t.form.train,a=o.target,s=a.checked?"1":"0";if(Array.isArray(e)){var r=t._i(e,null);a.checked?r<0&&t.$set(t.form,"train",e.concat([null])):r>-1&&t.$set(t.form,"train",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.form,"train",s)}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"transport2"}},[t._v("Train")])]),t._v(" "),t.form.errors.has("transport")?e("div",{staticClass:"error"},[e("lable",{staticClass:"danger text-danger"},[t._v(t._s(t.form.errors.get("transport")))])],1):t._e()])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"mode_of_transport"}},[t._v("Tour category")]),t._v(" "),e("br"),t._v(" "),e("multiselect",{attrs:{options:t.tour_type_list,multiple:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Pick some",label:"name","track-by":"name"},model:{value:t.form.tourtypes,callback:function(o){t.$set(t.form,"tourtypes",o)},expression:"form.tourtypes"}})],1)])]),t._v(" "),e("div",{staticClass:"row mb-30"},[e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"titleId"}},[t._v("Title")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("title")},attrs:{type:"text",placeholder:"Enter Title",name:"title"},domProps:{value:t.form.title},on:{input:function(o){o.target.composing||t.$set(t.form,"title",o.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"title"}})],1)]),t._v(" "),e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"tourtypeId"}},[t._v("Food")]),t._v(" "),e("div",[e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.food,expression:"form.food"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"food_yes",value:"1",name:"food"},domProps:{checked:t._q(t.form.food,"1")},on:{change:function(o){return t.$set(t.form,"food","1")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"food_yes"}},[t._v("Yes")])]),t._v(" "),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.food,expression:"form.food"}],staticClass:"custom-control-input",attrs:{type:"radio",value:"0",id:"food_no",name:"food"},domProps:{checked:t._q(t.form.food,"0")},on:{change:function(o){return t.$set(t.form,"food","0")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"food_no"}},[t._v("No")])])]),t._v(" "),t.form.errors.has("food")?e("div",{staticClass:"error"},[t._v("\n              "+t._s(t.form.errors.get("food"))+"\n            ")]):t._e()])])]),t._v(" "),e("div",{staticClass:"form-group mb-30"},[e("label",{attrs:{for:"descriptionId"}},[t._v("Description")]),t._v(" "),e("vue-editor",{class:{"is-invalid":t.form.errors.has("description")},model:{value:t.form.description,callback:function(o){t.$set(t.form,"description",o)},expression:"form.description"}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"description"}})],1),t._v(" "),e("div",{staticClass:"row mb-30"},[e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"form-group"},[e("input",{staticClass:"overflow-hidden",class:{"is-invalid":t.form.errors.has("photo")},attrs:{name:"photo",type:"file"},on:{change:function(o){return t.changePhoto(o)}}})])]),t._v(" "),e("div",{staticClass:"col-sm-6"},[""!=t.photo?e("img",{attrs:{src:t.photo,alt:"",width:"80",height:"80"}}):t._e()])])]),t._v(" "),e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-5"},[e("div",{staticClass:"form-group"},[e("input",{staticClass:"overflow-hidden",class:{"is-invalid":t.form.errors.has("detail_photo")},attrs:{type:"file"},on:{change:function(o){return t.changeDetailPhoto(o)}}})])]),t._v(" "),e("div",{staticClass:"col-sm-7"},[""!=t.detail_photo?e("img",{staticClass:"detail_photo",attrs:{src:t.detail_photo,alt:"",width:"80",height:"80"}}):t._e()])])])]),t._v(" "),e("hr"),t._v(" "),t._l(t.itinerarydays,(function(o,a){return e("div",{key:a,staticClass:"card content"},[e("h4",[t._v("Day "+t._s(o.day))]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"},[e("label",[t._v("Source")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:o.day_source,expression:"data.day_source"}],staticClass:"form-control select-field",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(o,"day_source",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"",disabled:"",hidden:""}},[t._v("Select Source")]),t._v(" "),t._l(t.cities,(function(o){return e("option",{key:o.id,domProps:{value:o.name}},[t._v(t._s(o.name))])}))],2),t._v(" "),t._v("\n\n            "+t._s(o.day_source)+"\n          ")]),t._v(" "),e("div",{staticClass:"col-sm-6"},[e("label",[t._v("Destination")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:o.day_destination,expression:"data.day_destination"}],staticClass:"form-control select-field",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(o,"day_destination",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"",disabled:"",hidden:""}},[t._v("Select Destination")]),t._v(" "),t._l(t.cities,(function(o){return e("option",{key:o.id,domProps:{value:o.name}},[t._v(t._s(o.name))])}))],2),t._v(" "),t._v("\n            "+t._s(o.day_destination)+"\n          ")]),t._v(" "),e("div",{staticClass:"col-sm-12"},[e("label",[t._v("Description")]),t._v(" "),e("vue-editor",{class:{"is-invalid":t.form.errors.has("description")},model:{value:o.day_description,callback:function(e){t.$set(o,"day_description",e)},expression:"data.day_description"}})],1)])])})),t._v(" "),e("form-buttons")],2)]},proxy:!0}])})}),[],!1,null,null,null);o.default=m.exports},3:function(t,o,e){"use strict";var a=e(0),s=Object(a.a)({},(function(){var t=this.$createElement,o=this._self._c||t;return o("section",{staticClass:"content"},[o("div",{staticClass:"container-fluid"},[o("div",{staticClass:"row justify-content-around"},[o("div",{staticClass:"col-md-12 pl-4 pb-5"},[this._t("formdata")],2)])])])}),[],!1,null,null,null);o.a=s.exports},4:function(t,o,e){"use strict";var a=e(17),s=e(15),r={components:{"back-button":a.a,"submit-button":s.a}},i=e(0),n=Object(i.a)(r,(function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"row justify-content-center"},[o("div",{staticClass:"col-sm-8"},[o("back-button"),this._v(" "),o("submit-button")],1)])}),[],!1,null,null,null);o.a=n.exports}}]);