(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{262:function(e,t,a){"use strict";a.r(t);var r=a(1);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s={name:"Tour-list",components:{"has-error":r.HasError},data:function(){var e;return o(e={chequePage:!1,tours:"",formShow:!1,payment_mode:"self",self_pay_mode:"cheque",teacher_section:!1,student_section:!1,student_bank:[],bankdetail:[],banknames:[],userinfo:"",robot:!1,teacherform:new r.Form({payment_mode:"self",payment_type:"",tour_code:this.$route.params.tour_code,schoolbankdetail_id:"",amount:"",user_id:"",school_id:this.$route.params.school_id,cheque_bank_name:"",date_of_issue:"",ifsc_code:"",cheque_number:"",added_by:"gbi"}),form:new r.Form({name:"",bank_name:"",account_number:"",account_type:"",ifsc_code:"",tour_code:this.$route.params.tour_code}),account_type:["Current Account","Saving Account","Recurring Deposit Account","Fixed Deposit Account"]},"banknames",[]),o(e,"touruser",""),o(e,"perhead",0),e},mounted:function(){this.userData()},methods:{onVerify:function(e){e&&(this.robot=!0)},onCaptchaExpired:function(){this.$refs.recaptcha.reset()},userData:function(){var e=this,t={school_id:this.$route.params.school_id,tour_code:this.$route.params.tour_code};axios.post("/api/gettourusers",t).then((function(t){e.teacherform.user_id=t.data.user_id,e.perhead=t.data.amount,e.touruser=t.data.tour,e.teacherform.amount=e.touruser[1].total*e.perhead})).catch((function(t){e.handleError(t)}))},submitPayment:function(){return this.teacherform.school_id=this.$route.params.school_id,"self"==this.teacherform.payment_mode&&"cheque"==this.teacherform.payment_type&&(this.chequePage=!0),"self"==this.teacherform.payment_mode&&"cash"==this.teacherform.payment_type&&this.submitForm(),"student"==this.teacherform.payment_mode&&(this.teacherform.payment_type="",this.submitForm()),!1},bankNameList:function(){var e=this;axios.get("/api/banknames").then((function(t){e.banknames=t.data}))},StudentBank:function(){var e=this;this.$route.params.id;this.$axios.post("/api/tour-bankdetail-student").then((function(t){e.student_bank=t.data})).catch((function(t){e.handleError(t)}))},submitForm:function(){var e=this;this.teacherform.post("/api/addtourpayment").then((function(t){if(t.data.error)return e.$swal.fire({icon:"error",title:t.data.error}),!1;e.$swal.fire({icon:"success",title:"Successfully Added !!"}),e.$router.push("/payments/".concat(e.$route.params.school_id,"/").concat(e.$route.params.tour_code))})).catch((function(t){e.$swal.fire({icon:"error",title:"Try again !!"}),e.handleError(t)}))},backReset:function(){this.chequePage=!1,this.teacherform.cheque_bank_name="",this.teacherform.date_of_issue="",this.teacherform.ifsc_code="",this.teacherform.cheque_number=""},validateCheque:function(){""!=this.teacherform.cheque_bank_name&&""!=this.teacherform.date_of_issue&&""!=this.teacherform.ifsc_code&&""!=this.teacherform.cheque_number?this.submitForm():this.$swal.fire({icon:"error",title:"Please fill all the fields !!"})}}},n=a(0),c=Object(n.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb-4",attrs:{id:"tour_payment"}},[0==e.chequePage?a("div",[a("div",{staticClass:"container p-t-15 mb-20"},[a("form",[e.touruser?a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-3"},[a("label",[e._v("No Of Pax")]),e._v(" "),a("p",[e._v(e._s(e.touruser[0].total+e.touruser[1].total))])]),e._v(" "),a("div",{staticClass:"col-sm-3"},[a("label",[e._v("Not Paid Members")]),e._v(" "),a("p",[e._v(e._s(e.touruser[0].total))])]),e._v(" "),a("div",{staticClass:"col-sm-3"},[a("label",[e._v("Amount")]),e._v(" "),a("p",[e._v(e._s(e.perhead)+" /per head")])]),e._v(" "),a("div",{staticClass:"col-sm-3"},[a("label",[e._v("Total Amount")]),e._v(" "),a("p",[e._v(e._s(e.teacherform.amount)+" /-")])])]):e._e(),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("label",{attrs:{for:"payment_mode mt-20"}},[e._v("Payment By")]),e._v(" "),a("div",{staticClass:"teacher-section"},[a("div",{staticClass:"form-check-inline"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.payment_mode,expression:"teacherform.payment_mode"}],staticClass:"form-check-input",attrs:{type:"radio",value:"student",name:"payment_mode"},domProps:{checked:e._q(e.teacherform.payment_mode,"student")},on:{change:function(t){return e.$set(e.teacherform,"payment_mode","student")}}}),e._v("By Student\n                ")])]),e._v(" "),a("div",{staticClass:"form-check-inline"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.payment_mode,expression:"teacherform.payment_mode"}],staticClass:"form-check-input",attrs:{type:"radio",value:"self",name:"payment_mode"},domProps:{checked:e._q(e.teacherform.payment_mode,"self")},on:{change:function(t){return e.$set(e.teacherform,"payment_mode","self")}}}),e._v("By Self (School Incharge)\n                ")])])])])]),e._v(" "),"self"==e.teacherform.payment_mode?a("div",{staticClass:"row mt-20"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.payment_type,expression:"teacherform.payment_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"option",value:"cheque"},domProps:{checked:e._q(e.teacherform.payment_type,"cheque")},on:{change:function(t){return e.$set(e.teacherform,"payment_type","cheque")}}}),e._v("\n                Cheque/DD\n              ")])])]),e._v(" "),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.payment_type,expression:"teacherform.payment_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"option",value:"cash"},domProps:{checked:e._q(e.teacherform.payment_type,"cash")},on:{change:function(t){return e.$set(e.teacherform,"payment_type","cash")}}}),e._v("\n                Cash\n              ")])])]),e._v(" "),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.payment_type,expression:"teacherform.payment_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"option",value:"net"},domProps:{checked:e._q(e.teacherform.payment_type,"net")},on:{change:function(t){return e.$set(e.teacherform,"payment_type","net")}}}),e._v("\n                Net Banking\n              ")])])])]):e._e()])])]):e._e(),e._v(" "),"self"==e.teacherform.payment_mode&&"cheque"==e.teacherform.payment_type?a("div",[a("div",{staticClass:"container pt-20"},[a("p",[e._v("Please Fill Cheque/DD Details..")]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"father_name"}},[e._v("Bank Name")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.cheque_bank_name,expression:"teacherform.cheque_bank_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.teacherform.cheque_bank_name},on:{input:function(t){t.target.composing||e.$set(e.teacherform,"cheque_bank_name",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"father_name"}},[e._v("Date of Issue")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.date_of_issue,expression:"teacherform.date_of_issue"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:e.teacherform.date_of_issue},on:{input:function(t){t.target.composing||e.$set(e.teacherform,"date_of_issue",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"father_name"}},[e._v("IFSC Code")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.ifsc_code,expression:"teacherform.ifsc_code"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.teacherform.ifsc_code},on:{input:function(t){t.target.composing||e.$set(e.teacherform,"ifsc_code",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"father_name"}},[e._v("Cheque Number")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherform.cheque_number,expression:"teacherform.cheque_number"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.teacherform.cheque_number},on:{input:function(t){t.target.composing||e.$set(e.teacherform,"cheque_number",t.target.value)}}})])])]),e._v(" "),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-outline-primary btn-square itrn_add_btn",attrs:{type:"button"},on:{click:function(t){return e.backReset()}}},[e._v("\n          BACK\n        ")]),e._v(" "),a("button",{staticClass:"btn btn-outline-primary btn-square itrn_add_btn",attrs:{type:"button"},on:{click:function(t){return e.validateCheque()}}},[e._v("\n          SUBMIT\n        ")])])])]):a("div",{staticClass:"row justify-content-center mt-5"},[a("button",{staticClass:"btn btn-outline-primary btn-square itrn_add_btn",attrs:{type:"button"},on:{click:function(t){return e.submitPayment()}}},[e._v("\n      SUBMIT\n    ")])])])}),[],!1,null,null,null);t.default=c.exports}}]);