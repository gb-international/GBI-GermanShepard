(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{258:function(t,e,s){"use strict";s.r(e);var r={name:"PnrList",data:function(){return{list:{},transport:"",edit_index:-1}},mounted:function(){this.getPnr(),this.transport=this.$route.params.transport},methods:{getPnr:function(){var t=this,e={transport_id:this.$route.params.id,tour_code:this.$route.params.tour_id,transport_type:this.$route.params.transport};axios.post("/api/pnrs/get",e,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){t.list=e.data})).catch((function(e){t.handleError(e)}))},edit_row:function(t){this.edit_index=t},update_row:function(t,e){this.UserTourUpdate(this.list[e]),this.edit_index=""},UserTourUpdate:function(t){var e=this,s="/api/pnrs/"+t.id;axios.patch(s,t,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(t){console.log(t),"error"==t.data?e.$swal.fire({icon:"error",title:"Try again",text:"Please enter valid travel code!"}):(e.edit_index=-1,e.$swal.fire("Success","PNR updated !!!","success"))})).catch((function(t){e.handleError(t)}))},delete_row:function(t,e,s){var r=this;this.$swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){if(t.value){var i="/api/pnrs/"+s,n={id:s};axios.delete(i,n,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(t){r.list.splice(e,1)})).catch((function(t){r.handleError(t)})),r.$swal.fire("Deleted!","Your file has been deleted.","success")}}))}}},i=s(0),n=Object(i.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"pnrList"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-9"},["bus"==t.transport?s("h3",{staticClass:"text-center pt-2"},[t._v(t._s(t._f("firstUppercase")(t.transport))+" Number History")]):s("h3",{staticClass:"text-center pt-2"},[t._v(t._s(t._f("firstUppercase")(t.transport))+" PNR History")])]),t._v(" "),s("div",{staticClass:"col-sm-3 pt-3"},[s("router-link",{staticClass:"btn btn-info",attrs:{to:"/pnr-users/"+t.$route.params.transport+"/"+t.$route.params.id+"/"+t.$route.params.tour_id}},[t._v("Assign PNR to Students")])],1)]),t._v(" "),s("hr"),t._v(" "),t.list.length>0?s("div",{staticClass:"flight-detail"},[s("div",{staticClass:"row"},t._l(t.list,(function(e,r){return s("div",{key:e.id,staticClass:"col-sm-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-10"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.pnr_number,expression:"flight.pnr_number"}],staticClass:"form-control",attrs:{type:"text",readonly:r!=t.edit_index},domProps:{value:e.pnr_number},on:{input:function(s){s.target.composing||t.$set(e,"pnr_number",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-sm-2"},[r!=t.edit_index?s("img",{staticClass:"edit",attrs:{src:"/assets/front/icons/edit.png"},on:{click:function(e){return t.edit_row(r)}}}):s("img",{staticClass:"edit",attrs:{src:"/assets/front/icons/update.png"},on:{click:function(e){return t.update_row("flight",r)}}}),t._v(" "),s("img",{staticClass:"delete",attrs:{src:"/assets/front/icons/delete.png"},on:{click:function(s){return t.delete_row("flight",r,e.id)}}})])])])})),0)]):s("div",{staticClass:"text-center"},[s("p",[t._v("Table is empty..")])])])}),[],!1,null,null,null);e.default=n.exports}}]);