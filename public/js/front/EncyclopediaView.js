(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{237:function(t,a,e){"use strict";e.r(a);var s=e(9),i=e.n(s),o=e(2);function n(t,a){return function(t){if(Array.isArray(t))return t}(t)||function(t,a){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],s=!0,i=!1,o=void 0;try{for(var n,r=t[Symbol.iterator]();!(s=(n=r.next()).done)&&(e.push(n.value),!a||e.length!==a);s=!0);}catch(t){i=!0,o=t}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return e}(t,a)||function(t,a){if(!t)return;if("string"==typeof t)return r(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r(t,a)}(t,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,s=new Array(a);e<a;e++)s[e]=t[e];return s}var l={name:"State",components:{VueSlickCarousel:i.a,Form:o.Form,HasError:o.HasError},data:function(){return{settings:{dots:!0,infinite:!1,autoplay:!0,speed:500,autoplaySpeed:1500,slidesToShow:3,slidesToScroll:3,initialSlide:0,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0,dots:!0}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},state_data:[],comment_data:[],comment_list:[],state_list:[],reply_modal:!1,comment_id:!1,encyclopedia_id:"",reply_input:"",show:!1,src:"",loadedRatio:0,page:1,numPages:0,form:new o.Form({body:"",encyclopedia_id:"",parent_id:null})}},watch:{"$route.params.id":function(t){this.stateData()}},created:function(){this.stateData(),this.states()},methods:{updateCurrent:function(t){this.page=t},pdfShow:function(t){this.src="",this.show=!0,this.src="/encyclopedia/pdf/"+t},password:function(t,a){t(prompt('password is "test"'))},error:function(t){console.log(t)},stateData:function(){var t=this,a="/api/encyclopedia/".concat(this.$route.params.id);this.$axios(a).then((function(a){t.state_data=a.data,t.form.encyclopedia_id=t.state_data.id;var e="/api/ency-comments/".concat(t.form.encyclopedia_id);t.$axios(e).then((function(a){t.comment_list=a.data}))}))},stateComments:function(){var t="/api/ency-comments/".concat(this.form.encyclopedia_id);this.$axios(t).then((function(t){return t.data}))},states:function(){var t=this;this.$axios.get("/api/encyclopedia-list").then((function(a){t.state_list=a.data}))},ReplyModal:function(t){if(null==localStorage.token)return window.$("#loginButton").click(),!1;this.reply_modal=!this.reply_modal,this.comment_id=t},ReplySubmit:function(){this.reply_modal=!this.reply_modal,this.form.parent_id=this.comment_id,this.form.body=this.reply_input,this.reply_input="",this.addComment()},getImgUrl:function(t){return"/encyclopedia/"+t},getProfileImage:function(t){return"/uploadimage/"+t},addComment:function(){var t=this;null==localStorage.token?(alert("Please login first"),window.$("#loginButton").click()):this.$axios.post("/api/encyclopedia-comments",this.form,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(a){t.stateData(),t.stateComments(),t.form.body="",t.form.parent_id=null}))},goToState:function(t){var a="/encyclopedia/"+t;this.$router.push(a)},scrollToTop:function(){}},filters:{pdfFilter:function(t){return t.replace(".pdf","")},dateFormat:function(t){t=new Date(t);var a=n(new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit"}).formatToParts(t),5),e=a[0].value,s=a[2].value,i=a[4].value;return"".concat(s,"-").concat(e,"-").concat(i)}}},c=e(0),d=Object(c.a)(l,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.state_data?e("div",{staticClass:"State"},[e("section",{staticClass:"banner-block"},[e("img",{staticClass:"top-img",attrs:{id:"traveleduimg",src:t.state_data.banner_image}})]),t._v(" "),e("div",{staticClass:"container state_body mt-30"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-8"},[e("h4",{staticClass:"state_name mb-20"},[t._v(t._s(t.state_data.state_name))]),t._v(" "),e("div",{staticClass:"state_description",domProps:{innerHTML:t._s(t.state_data.description)}})]),t._v(" "),e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"card state_card"},[e("div",{staticClass:"map_show",domProps:{innerHTML:t._s(t.state_data.map_link)}})]),t._v(" "),e("div",{staticClass:"state_images p-0"},[e("div",{staticClass:"row p-0"},t._l(t.state_data.images,(function(t){return e("div",{key:t.id,staticClass:"col-6 p-0"},[e("img",{staticClass:"p-0",attrs:{src:t.image,loading:"lazy",alt:t.alt}})])})),0)]),t._v(" "),e("div",{staticClass:"card state_card"},[e("p",{staticClass:"p-0 m-0"},[t._v("Itinerary")]),t._v(" "),t._l(t.state_data.itinerarypdfs,(function(a){return e("p",{key:a.id,staticClass:"link pl-2"},[e("a",{attrs:{href:"/encyclopedia/pdf/"+a.name,target:"black"}},[t._v(t._s(t._f("pdfFilter")(a.name))+" "),e("img",{staticClass:"encylopedia-pdf",attrs:{src:"/images/icons/pdf.png"}})])])}))],2)])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[t.state_list.length?e("div",{staticClass:"state_list"},[e("VueSlickCarousel",t._b({attrs:{arrows:!0,dots:!0}},"VueSlickCarousel",t.settings,!1),t._l(t.state_list,(function(a){return e("div",{key:a.id,staticClass:"card_scroll states_card"},[e("div",{staticClass:"card"},[e("img",{staticClass:"card-img-top",attrs:{src:a.thumbnail,loading:"lazy",alt:a.state_name}}),t._v(" "),e("div",{staticClass:"card-img-overlay text-center"},[e("p",{staticClass:"card-text text-white"},[e("router-link",{attrs:{to:"/encyclopedia/"+a.slug}},[t._v(t._s(a.state_name))])],1)])])])})),0)],1):t._e()]),t._v(" "),e("div",{staticClass:"col-sm-12 p-0"},[e("div",{staticClass:"col-md-8 w-100 p-0"},[e("div",{staticClass:"comment_section w-100"},[e("div",{staticClass:"container mt-3"},[e("h4",[t._v("Reviews")]),t._v(" "),e("form",{staticClass:"form",on:{submit:function(a){return a.preventDefault(),t.addComment()}}},[e("div",{staticClass:"form-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.body,expression:"form.body"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("body")},attrs:{rows:"3",placeholder:"Share your experiences and insights with us"},domProps:{value:t.form.body},on:{input:function(a){a.target.composing||t.$set(t.form,"body",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"body"}}),t._v(" "),t._m(0)],1)]),t._v(" "),t._l(t.comment_list,(function(a){return e("div",{key:a.id,staticClass:"comment_section w-100"},[null==a.parent_id?e("div",[a.user?e("div",{staticClass:"media p-0"},[e("img",{staticClass:"mr-3 rounded-circle w-45",attrs:{src:t.getProfileImage(a.user.information.photo),alt:"John Doe"}}),t._v(" "),e("div",{staticClass:"media-body"},[e("h6",[t._v("\n                        "+t._s(a.user.name)+"\n                        "),e("small",{staticClass:"text-small"},[e("i",[t._v(t._s(t._f("dateFormat")(a.created_at)))])]),t._v(" "),e("button",{staticClass:"btn btn-outline-dark float-right replybtn",on:{click:function(e){return t.ReplyModal(a.id)}}},[t._v("Reply")])]),t._v(" "),e("p",[t._v(t._s(a.body))]),t._v(" "),1==t.reply_modal&&t.comment_id==a.id?e("div",[e("form",{staticClass:"form",on:{submit:function(a){return a.preventDefault(),t.ReplySubmit()}}},[e("div",{staticClass:"form-group"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply_input,expression:"reply_input"}],staticClass:"form-control",attrs:{rows:"3",placeholder:"Type here..."},domProps:{value:t.reply_input},on:{input:function(a){a.target.composing||(t.reply_input=a.target.value)}}}),t._v(" "),t._m(1,!0)])])]):t._e(),t._v(" "),t._l(t.state_data.comments,(function(s){return e("div",{key:s.id},[s.parent_id==a.id?e("div",{staticClass:"media p-0"},[e("img",{staticClass:"mr-3  rounded-circle w-45",attrs:{src:t.getProfileImage(a.user.information.photo),alt:"Jane Doe"}}),t._v(" "),e("div",{staticClass:"media-body"},[e("h6",[t._v("\n                              "+t._s(a.user.name)+"\n                              "),e("small",{staticClass:"text-small"},[e("i",[t._v(t._s(t._f("dateFormat")(a.created_at)))])])]),t._v(" "),e("p",[t._v(t._s(s.body))])])]):t._e()])}))],2)]):t._e()]):t._e()])}))],2)])])])])])]):t._e()}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col text-right"},[a("button",{staticClass:"btn btn-info profile_button comment_btn",attrs:{type:"submit"}},[this._v("Submit")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col text-right"},[a("button",{staticClass:"btn btn-info profile_button comment_btn",attrs:{type:"submit"}},[this._v("Submit")])])])}],!1,null,null,null);a.default=d.exports}}]);