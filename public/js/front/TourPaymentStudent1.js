(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{10:function(t,e,s){"use strict";function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t}).apply(this,arguments)}var i=Object.prototype.hasOwnProperty;var n,o,r,c=(n=!1,o=[],r={resolved:function(){return n},resolve:function(t){if(!n){n=!0;for(var e=0,s=o.length;e<s;e++)o[e](t)}},promise:{then:function(t){n?t():o.push(t)}}},{notify:function(){r.resolve()},wait:function(){return r.promise},render:function(t,e,s){this.wait().then((function(){s(window.grecaptcha.render(t,e))}))},reset:function(t){void 0!==t&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.reset(t)})))},execute:function(t){void 0!==t&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.execute(t)})))},checkRecaptchaLoad:function(){i.call(window,"grecaptcha")&&i.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!r.resolved())throw new Error("ReCAPTCHA has not been loaded")}});"undefined"!=typeof window&&(window.vueRecaptchaApiLoaded=c.notify);var u={name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!1},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},beforeMount:function(){if(this.loadRecaptchaScript&&!document.getElementById(this.recaptchaScriptId)){var t=document.createElement("script");t.id=this.recaptchaScriptId,t.src="https://"+this.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+this.language,t.async=!0,t.defer=!0,document.head.appendChild(t)}},mounted:function(){var t=this;c.checkRecaptchaLoad();var e=a({},this.$props,{callback:this.emitVerify,"expired-callback":this.emitExpired,"error-callback":this.emitError}),s=this.$slots.default?this.$el.children[0]:this.$el;c.render(s,e,(function(e){t.$widgetId=e,t.$emit("render",e)}))},methods:{reset:function(){c.reset(this.$widgetId)},execute:function(){c.execute(this.$widgetId)},emitVerify:function(t){this.$emit("verify",t)},emitExpired:function(){this.$emit("expired")},emitError:function(){this.$emit("error")}},render:function(t){return t("div",{},this.$slots.default)}};e.a=u},260:function(t,e,s){"use strict";s.r(e);var a=s(10),i=s(2);function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o={name:"Tour-list",components:{"vue-recaptcha":a.a,"has-error":i.HasError},data:function(){var t;return n(t={chequePage:!1,response:"",price:"",tours:"",formShow:!1,payment_mode:"self",self_pay_mode:"cheque",student_bank:[],bankdetail:[],banknames:[],tour_info:"",userinfo:"",robot:!1,studentForm:{payment_mode:"self",payment_type:"",tour_code:"",schoolbankdetail_id:"",amount:"",user_id:"",school_id:"",cheque_bank_name:"",date_of_issue:"",ifsc_code:"",cheque_number:""},form:new i.Form({name:"",bank_name:"",account_number:"",account_type:"",ifsc_code:"",tour_code:this.tour_id}),account_type:["Current Account","Saving Account","Recurring Deposit Account","Fixed Deposit Account"]},"banknames",[]),n(t,"tour_id",""),t},mounted:function(){""!=this.$store.state.paymentData?(this.tour_id=this.$store.state.paymentData.tour_id,this.userinfo=this.$cookies.get("user"),this.studentForm.school_id=this.userinfo.school_id,console.log(this.userinfo),this.tourBank(),this.userData()):this.$router.push("/tour-list")},methods:{onVerify:function(t){t&&(this.robot=!0)},onCaptchaExpired:function(){this.$refs.recaptcha.reset()},tourBank:function(){var t=this;this.$axios.post("/api/tour-bankdetail",[],{headers:{Authorization:"Bearer ".concat(this.$cookies.get("access_token"))}}).then((function(e){t.bankdetail=e.data})).catch((function(e){t.formShow=!0,t.handleError(e)}))},userData:function(){var t=this,e={travel_code:this.tour_id};this.$axios.post("/api/payment-tour",e,{headers:{Authorization:"Bearer ".concat(this.$cookies.get("access_token"))}}).then((function(e){console.log(e),t.tour_info=e.data,t.studentForm.user_id=e.data.user_id,t.studentForm.amount=e.data.price,t.price=t.studentForm.amount,t.StudentBank()})).catch((function(e){t.handleError(e)}))},submitPayment:function(){return this.studentForm.tour_code=this.tour_id,this.studentForm.amount=this.tour_info.price,this.studentForm.user_id=this.tour_info.user_id,0==this.robot?(this.$swal.fire({icon:"error",title:"Try Again !!"}),!1):("self"==this.studentForm.payment_mode&&"cheque"==this.studentForm.payment_type&&(this.studentForm.schoolbankdetail_id="",this.chequePage=!0),"self"==this.studentForm.payment_mode&&"cash"==this.studentForm.payment_type&&(this.studentForm.schoolbankdetail_id="",this.submitForm()),"student"==this.studentForm.payment_mode&&""!=this.studentForm.schoolbankdetail_id&&(this.studentForm.payment_type="",this.submitForm()),!1)},bankNameList:function(){var t=this;this.$axios.get("/api/banknames").then((function(e){t.banknames=e.data}))},StudentBank:function(){var t=this,e={tour_code:this.tour_id};this.$axios.post("/api/tour-bankdetail-student",e,{headers:{Authorization:"Bearer ".concat(this.$cookies.get("access_token"))}}).then((function(e){t.student_bank=e.data,console.log(e)})).catch((function(e){t.handleError(e)}))},submitForm:function(){var t=this;this.$axios.post("/api/tour-submit-payment",this.studentForm,{headers:{Authorization:"Bearer ".concat(this.$cookies.get("access_token"))}}).then((function(e){if(e.data.error)return t.$swal.fire({icon:"error",title:e.data.error}),!1;t.$swal.fire({icon:"success",title:"Successfully Added !!"}),t.$router.push("/tour-list")})).catch((function(e){t.handleError(e)}))},onlinePayment:function(){if(0==this.robot)return this.$swal.fire({icon:"error",title:"Try Again !!"}),!1;var t=n({user_id:"",travel_code:"",tour_id:"",school_id:"",price:"",no_of_person:"",base_price:0,paid_person:0,unpaid_person:0,total_members:0},"price",0);t.user_id=this.tour_info.user_id,t.paid_person=this.tour_info.paid_person,t.unpaid_person=this.tour_info.unpaid_person,t.total_members=this.tour_info.total_members,t.base_price=this.tour_info.base_price,t.price=this.tour_info.price,t.travel_code=this.tour_info.travel_code,t.tour_id=this.tour_id,t.school_id=this.userinfo.school_id,this.$cookies.set("payment-data",t,3600),this.$router.push("/payment-billing")},backReset:function(){this.chequePage=!1,this.studentForm.cheque_bank_name="",this.studentForm.date_of_issue="",this.studentForm.ifsc_code="",this.studentForm.cheque_number=""},validateCheque:function(){""!=this.studentForm.cheque_bank_name&&""!=this.studentForm.date_of_issue&&""!=this.studentForm.ifsc_code&&""!=this.studentForm.cheque_number?this.submitForm():this.$swal.fire({icon:"error",title:"Please fill all the fields !!"})}}},r=s(0),c=Object(r.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pb-4",attrs:{id:"tour_payment"}},[0==t.chequePage?s("div",[t.tour_info?s("div",{staticClass:"container p-t-15 mb-20"},[s("form",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-2"},[s("label",{staticClass:"text-muted",attrs:{for:"tour_code"}},[t._v("Itinerary Code")]),t._v(" "),s("p",[t._v(t._s(t.tour_id))])]),t._v(" "),s("div",{staticClass:"col-sm-2 text-center"},[s("label",{staticClass:"text-muted",attrs:{for:"price"}},[t._v("Tour Price")]),t._v(" "),s("p",[t._v("\n              "+t._s(t.tour_info.base_price)+" /-\n            ")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"student-section"},[t.student_bank?s("div",{staticClass:"col-sm-6"},[s("label",[t._v("Bank Details to pay")]),t._v(" "),s("div",{staticClass:"ml-5"},[s("div",{staticClass:"row"},[t._m(0),t._v(" "),s("div",{staticClass:"col"},[t._v(t._s(t.student_bank.name))])]),t._v(" "),s("div",{staticClass:"row"},[t._m(1),t._v(" "),s("div",{staticClass:"col"},[t._v(t._s(t.student_bank.bank_name))])]),t._v(" "),s("div",{staticClass:"row"},[t._m(2),t._v(" "),s("div",{staticClass:"col"},[t._v(t._s(t.student_bank.account_number))])]),t._v(" "),s("div",{staticClass:"row"},[t._m(3),t._v(" "),s("div",{staticClass:"col"},[t._v(t._s(t.student_bank.account_type))])]),t._v(" "),s("div",{staticClass:"row"},[t._m(4),t._v(" "),s("div",{staticClass:"col"},[t._v(t._s(t.student_bank.ifsc_code))])])])]):t._e()])])]),t._v(" "),"self"==t.studentForm.payment_mode?s("div",{staticClass:"row mt-20"},[s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"form-check"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.studentForm.payment_type,expression:"studentForm.payment_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"option",value:"cheque"},domProps:{checked:t._q(t.studentForm.payment_type,"cheque")},on:{change:function(e){return t.$set(t.studentForm,"payment_type","cheque")}}}),t._v("\n                Cheque/DD\n              ")])])]),t._v(" "),s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"form-check"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.studentForm.payment_type,expression:"studentForm.payment_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"option",value:"cash"},domProps:{checked:t._q(t.studentForm.payment_type,"cash")},on:{change:function(e){return t.$set(t.studentForm,"payment_type","cash")}}}),t._v("\n                Cash\n              ")])])]),t._v(" "),s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"form-check"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.studentForm.payment_type,expression:"studentForm.payment_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"option",value:"net"},domProps:{checked:t._q(t.studentForm.payment_type,"net")},on:{change:function(e){return t.$set(t.studentForm,"payment_type","net")}}}),t._v("\n                Net Banking\n              ")])])])]):t._e(),t._v(" "),"student"==t.studentForm.payment_mode?s("div",{staticClass:"row"},t._l(t.bankdetail,(function(e){return s("div",{key:e.id,staticClass:"col-sm-6"},[s("hr"),t._v(" "),s("div",{staticClass:"form-check-inline"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.studentForm.schoolbankdetail_id,expression:"studentForm.schoolbankdetail_id"}],staticClass:"form-check-input",attrs:{type:"radio"},domProps:{value:e.id,checked:t._q(t.studentForm.schoolbankdetail_id,e.id)},on:{change:function(s){return t.$set(t.studentForm,"schoolbankdetail_id",e.id)}}}),t._v("\n                "+t._s(e.name)+"\n              ")])]),t._v(" "),s("div",{staticClass:"ml-5"},[s("div",{staticClass:"row"},[t._m(5,!0),t._v(" "),s("div",{staticClass:"col"},[t._v(t._s(e.name))])]),t._v(" "),s("div",{staticClass:"row"},[t._m(6,!0),t._v(" "),s("div",{staticClass:"col"},[t._v(t._s(e.bank_name))])]),t._v(" "),s("div",{staticClass:"row"},[t._m(7,!0),t._v(" "),s("div",{staticClass:"col"},[t._v(t._s(e.account_number))])]),t._v(" "),s("div",{staticClass:"row"},[t._m(8,!0),t._v(" "),s("div",{staticClass:"col"},[t._v(t._s(e.account_type))])]),t._v(" "),s("div",{staticClass:"row"},[t._m(9,!0),t._v(" "),s("div",{staticClass:"col"},[t._v(t._s(e.ifsc_code))])])])])})),0):t._e(),t._v(" "),s("div",{staticClass:"row mt-20"},[s("div",{staticClass:"col-sm-18"},[s("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"robot"}},[t._v("RObOt?")]),t._v(" "),s("div",{staticClass:"col-sm-10"},[s("vue-recaptcha",{ref:"recaptcha",attrs:{loadRecaptchaScript:!0,sitekey:"6LeyF7gZAAAAADBt5N6EDQqFhL4-DZBUC13NgDpT"},on:{expired:t.onCaptchaExpired,verify:t.onVerify}})],1)])]),t._v(" "),s("div",{staticClass:"row justify-content-center mt-5"},["net"==t.studentForm.payment_type?s("button",{staticClass:"btn btn-outline-primary btn-square ml-2",attrs:{type:"button"},on:{click:function(e){return t.onlinePayment()}}},[t._v("\n            SUBMIT\n          ")]):s("button",{staticClass:"btn btn-outline-primary btn-square",attrs:{type:"button"},on:{click:function(e){return t.submitPayment()}}},[t._v("\n            SUBMIT\n          ")])])])]):t._e()]):t._e(),t._v(" "),1==t.chequePage?s("div",[s("div",{staticClass:"container pt-20"},[s("p",[t._v("Please Fill Cheque/DD Details..")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"father_name"}},[t._v("Bank Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.studentForm.cheque_bank_name,expression:"studentForm.cheque_bank_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.studentForm.cheque_bank_name},on:{input:function(e){e.target.composing||t.$set(t.studentForm,"cheque_bank_name",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"father_name"}},[t._v("Date of Issue")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.studentForm.date_of_issue,expression:"studentForm.date_of_issue"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.studentForm.date_of_issue},on:{input:function(e){e.target.composing||t.$set(t.studentForm,"date_of_issue",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"father_name"}},[t._v("IFSC Code")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.studentForm.ifsc_code,expression:"studentForm.ifsc_code"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.studentForm.ifsc_code},on:{input:function(e){e.target.composing||t.$set(t.studentForm,"ifsc_code",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-sm-4"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"father_name"}},[t._v("Cheque Number")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.studentForm.cheque_number,expression:"studentForm.cheque_number"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.studentForm.cheque_number},on:{input:function(e){e.target.composing||t.$set(t.studentForm,"cheque_number",e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-outline-primary btn-square",attrs:{type:"button"},on:{click:function(e){return t.backReset()}}},[t._v("\n          BACK\n        ")]),t._v(" "),s("button",{staticClass:"btn btn-outline-primary btn-square",attrs:{type:"button"},on:{click:function(e){return t.validateCheque()}}},[t._v("\n          SUBMIT\n        ")])])])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[this._v("\n                      Beneficary\n                      "),e("span",[this._v(":")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[this._v("\n                      Bank\n                      "),e("span",[this._v(":")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[this._v("\n                      Account Number\n                      "),e("span",[this._v(":")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[this._v("\n                      Account Type\n                      "),e("span",[this._v(":")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[this._v("\n                      IFSC Code\n                      "),e("span",[this._v(":")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[this._v("\n                  Beneficary\n                  "),e("span",[this._v(":")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[this._v("\n                  Bank\n                  "),e("span",[this._v(":")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[this._v("\n                  Account Number\n                  "),e("span",[this._v(":")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[this._v("\n                  Account Type\n                  "),e("span",[this._v(":")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[this._v("\n                  IFSC Code\n                  "),e("span",[this._v(":")])])}],!1,null,null,null);e.default=c.exports}}]);