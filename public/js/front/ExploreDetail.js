(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{231:function(t,e,i){"use strict";i.r(e);var a=i(40),s=i.n(a),o=i(2),r={name:"Booking",components:{multiselect:s.a,"has-error":o.HasError},props:["list","title","selected_cities","city_list"],data:function(){return{transports:["Bus","Train","Air"],sightseeing_list:"",travel_type_list:["Train","AC Bus","Flight","Train","Flight","Train","AC Bus"],occupancy_list:["Single","Double","Triple","Quad"],form:new o.Form({state_date:"",end_date:"",person:2,room:1,occupancy_type:"",city_id:[],sightseen:"",transport:"",noofday:1,accommodation:3,itinerary_id:""}),customize_btn:!0,back_btn:!1,book_btn:!0,first_form:!0,second_form:!1}},watch:{"form.city_id":function(){this.sightseeingData(this.form.city_id)}},created:function(){this.form.itinerary_id=this.$route.params.id,this.selectedItineraryCities()},methods:{selectedItineraryCities:function(){if(this.city_list.length>0)for(var t=0;t<this.city_list.length;t++)this.selected_cities.includes(this.city_list[t].name)&&this.form.city_id.push(this.city_list[t])},sightseeingData:function(t){var e=this;this.$axios.post("/api/city-sightseeing",{list:t}).then((function(t){e.sightseeing_list=t.data}))},secondForm:function(){0==this.back_btn?(this.back_btn=!0,this.customize_btn=!1,this.first_form=!1,this.second_form=!0):(this.customize_btn=!0,this.back_btn=!1,this.first_form=!0,this.second_form=!1)},down:function(){this.form.noofday>1&&(this.form.noofday=this.form.noofday-1)},up:function(){this.form.noofday=this.form.noofday+1},cityList:function(){var t=this;this.$axios.get("/api/city").then((function(e){for(var i=0;i<e.data.data.length;i++)t.options.push({value:e.data.data[i].name})}))},BookingSubmit:function(){var t=this;if(null==this.$cookies.get("access_token"))return window.$(".close").click(),this.$swal.fire({icon:"error",title:"Sorry! you are not looged in",footer:'<a href data-toggle="modal" data-target="#LoginForm" class="text-info">Click to Login</a>'}),!1;this.form.post("/api/booking",{headers:{Authorization:"Bearer ".concat(this.$cookies.get("access_token"))}}).then((function(e){t.form.reset(),window.$(".close").click(),t.$swal.fire({icon:"success",title:"Successfull",text:"We will contact you soon !!"})})).catch((function(e){t.$swal.fire({icon:"error",title:"Please provide valide details"}),t.handleError(e)}))}}},n=i(0);function l(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var d={name:"ExploreDetail",components:{booking:Object(n.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"booking-form grey-form"},[i("p",{staticClass:"font-weight-bold text-dark text-capitalize p-0 m-0"},[t._v(t._s(t._f("CapitalizeString")(t.title)))]),t._v(" "),t.first_form?i("p",[t._v("When would you like to go?")]):t._e(),t._v(" "),t.second_form?i("p",[t._v("Please Specify Your Requirements.")]):t._e(),t._v(" "),i("form",{staticClass:"form",attrs:{method:"POST"},on:{submit:function(e){return e.preventDefault(),t.BookingSubmit(e)}}},[t.first_form?i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-6"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"startdate"}},[t._v("Start Journy Date")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.start_date,expression:"form.start_date"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("start_date")},attrs:{type:"date",id:"startdate",required:""},domProps:{value:t.form.start_date},on:{input:function(e){e.target.composing||t.$set(t.form,"start_date",e.target.value)}}}),t._v(" "),i("has-error",{attrs:{form:t.form,field:"start_date"}})],1)]),t._v(" "),i("div",{staticClass:"col-sm-6"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"end_date"}},[t._v("End Journy Date")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.end_date,expression:"form.end_date"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("end_date")},attrs:{type:"date",id:"end_date",required:""},domProps:{value:t.form.end_date},on:{input:function(e){e.target.composing||t.$set(t.form,"end_date",e.target.value)}}}),t._v(" "),i("has-error",{attrs:{form:t.form,field:"end_date"}})],1)]),t._v(" "),i("div",{staticClass:"col-sm-6"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"number_of_person"}},[t._v("Number of Person")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.person,expression:"form.person"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("person")},attrs:{type:"number",id:"number_of_person",min:"2",required:""},domProps:{value:t.form.person},on:{input:function(e){e.target.composing||t.$set(t.form,"person",e.target.value)}}}),t._v(" "),i("has-error",{attrs:{form:t.form,field:"start_date"}})],1)]),t._v(" "),i("div",{staticClass:"col-sm-6"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"number_of_person"}},[t._v("Number of Rooms")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.room,expression:"form.room"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("room")},attrs:{type:"number",id:"number_of_person",min:"1",required:""},domProps:{value:t.form.room},on:{input:function(e){e.target.composing||t.$set(t.form,"room",e.target.value)}}}),t._v(" "),i("has-error",{attrs:{form:t.form,field:"start_date"}})],1)]),t._v(" "),i("div",{staticClass:"col-sm-12"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"occupancy"}},[t._v("Occupancy Types")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.occupancy_type,expression:"form.occupancy_type"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("occupancy_type")},attrs:{required:""},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"occupancy_type",e.target.multiple?i:i[0])}}},t._l(t.occupancy_list,(function(e,a){return i("option",{key:a,domProps:{value:e}},[t._v("\n              "+t._s(e)+"\n            ")])})),0),t._v(" "),i("has-error",{attrs:{form:t.form,field:"occupancy_type"}})],1)])]):t._e(),t._v(" "),t.second_form?i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-12"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"cities"}},[t._v("Cities")]),t._v(" "),i("multiselect",{attrs:{options:t.city_list,multiple:!0,"track-by":"name",label:"name","close-on-select":!0,placeholder:"Select City"},model:{value:t.form.city_id,callback:function(e){t.$set(t.form,"city_id",e)},expression:"form.city_id"}})],1)]),t._v(" "),i("div",{staticClass:"col-sm-12"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"sightseeing"}},[t._v("Places(Sightseeing)")]),t._v(" "),t.sightseeing_list?i("multiselect",{attrs:{options:t.sightseeing_list,multiple:!0,"track-by":"name",label:"name","close-on-select":!0,placeholder:"Select Sightseeing"},model:{value:t.form.sightseen,callback:function(e){t.$set(t.form,"sightseen",e)},expression:"form.sightseen"}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"col-sm-12"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"transport"}},[t._v("Mode of Transport")]),t._v(" "),i("multiselect",{attrs:{options:t.transports,multiple:!0,"close-on-select":!0,placeholder:"Mode of transport"},model:{value:t.form.transport,callback:function(e){t.$set(t.form,"transport",e)},expression:"form.transport"}})],1)]),t._v(" "),i("div",{staticClass:"col-sm-6"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"numofday"}},[t._v("Number of Days")]),t._v(" "),i("div",{staticClass:"row align-content-center"},[i("div",{staticClass:"col"},[i("img",{staticClass:"w-40 link",attrs:{src:"/images/icons/minus.png"},on:{click:function(e){return t.down()}}})]),t._v(" "),i("div",{staticClass:"col"},[t._v("\n              "+t._s(t.form.noofday)+"\n            ")]),t._v(" "),i("div",{staticClass:"col"},[i("img",{staticClass:"w-40 link",attrs:{src:"/images/icons/add.png"},on:{click:function(e){return t.up()}}})])])])]),t._v(" "),i("div",{staticClass:"col-sm-6"},[i("label",{attrs:{for:"accommodation"}},[t._v("Accommodation Preference")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.accommodation,expression:"form.accommodation"}],staticClass:"form-control",attrs:{id:"accomodation"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"accommodation",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"2"}},[t._v("2 Star")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("3 Star")]),t._v(" "),i("option",{attrs:{value:"4"}},[t._v("4 Star")]),t._v(" "),i("option",{attrs:{value:"5"}},[t._v("5 Star")])])])]):t._e(),t._v(" "),i("div",{staticClass:"text-center"},[t.customize_btn?i("button",{staticClass:"btn profile_button",attrs:{type:"button"},on:{click:function(e){return t.secondForm()}}},[t._v("\n        Customize")]):t._e(),i("span",{staticClass:"mr-10"}),t._v(" "),t.back_btn?i("button",{staticClass:"btn profile_button",attrs:{type:"button"},on:{click:function(e){return t.secondForm()}}},[t._v("\n        Back")]):t._e(),i("span",{staticClass:"mr-10"}),t._v(" "),t.book_btn?i("button",{staticClass:"btn profile_button text-capitalize",attrs:{type:"submit"}},[t._v("\n        send inquiry\n      ")]):t._e()])])])}),[],!1,null,null,null).exports},metaInfo:{title:"GBI Explore Destination",meta:[{name:"description",content:"@GoWithGBI a state of art platform which allows user to satiate all its travel needs at one click of a button"},{name:"keywords",content:"@GoWithGBI,explore desired destinations,tailored made itineraries ,custom built itineraries,itineraries of your choice and preferences,explore itineraries,explore educational programs"},{name:"url",content:"https://www.gowithgbi.com/resources/explore-destination"}]},data:function(){return{day:0,description:"",itineraryData:[],selected_cities:[],city_list:[],login:!1,loading:!0}},watch:{"$store.state.token":function(){this.$store.state.token&&(this.login=!0)}},mounted:function(){null!=this.$cookies.get("access_token")&&(this.login=!0)},created:function(){this.getItinerary()},methods:{getItinerary:function(){var t=this;this.$axios.get("/api/itinerary-view/".concat(this.$route.params.id)).then((function(e){if(t.itineraryData=e.data,t.itineraryData.itinerarydays){var i=t.itineraryData.itinerarydays,a=[];if(t.selected_cities=[],i){t.selected_cities=[];for(var s=0;s<i.length;s++)a.push(i[s].day_source),a.push(i[s].day_destination)}t.selected_cities=l(new Set(a))}t.getRelatedCities(t.itineraryData.destination)}))},getRelatedCities:function(t){var e=this;this.$axios.get("/api/related-cities/".concat(t)).then((function(t){e.city_list=t.data,e.loading=!1}))}}},m=Object(n.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"explorelist"}},[i("section",{staticClass:"banner-block"},[i("img",{attrs:{src:t.itineraryData.detail_photo,loading:"lazy",alt:"itinerary"}})]),t._v(" "),i("div",{staticClass:"container"},[i("div",{staticClass:"row w-100 mt-2"},[i("div",{staticClass:"col-sm-8"},t._l(t.itineraryData.tourtypes,(function(e){return i("span",{key:e.id,staticClass:"badge badge-dark ml-1"},[t._v(t._s(e.name))])})),0),t._v(" "),i("div",{staticClass:"col-sm-4 p-0 m-0 text-right"},[t.login?i("button",{staticClass:"btn profile_button text-white book_btn",attrs:{"data-toggle":"modal","data-target":"#bookModal"}},[t._v("Book Now")]):i("button",{staticClass:"btn profile_button text-white book_btn",attrs:{id:"loginButton","data-toggle":"modal","data-target":"#LoginForm"}},[t._v("Book Now")])])]),t._v(" "),i("div",{staticClass:"w-100 pt-2 text-center"},[i("h1",{staticClass:"font-20 text-lowercase text-capitalize pt-2 pb-2"},[i("u",[t._v(t._s(t._f("CapitalizeString")(t.itineraryData.title)))])])]),t._v(" "),i("div",{staticClass:"description",domProps:{innerHTML:t._s(t.description)}}),t._v(" "),i("div",{staticClass:"row w-100 pt-3",attrs:{id:"explore_detail_part"}},t._l(t.itineraryData.itinerarydays,(function(e){return i("div",{key:e.id,staticClass:"col-sm-4"},[i("h4",{staticClass:"day_tab"},[t._v("Day "+t._s(e.day))]),t._v(" "),e.day_source!=e.day_destination?i("h1",{staticClass:"explor-head text-capitalize"},[t._v(t._s(e.day_source)+" - "+t._s(e.day_destination))]):i("h1",{staticClass:"explor-head"},[t._v(t._s(e.day_source))]),t._v(" "),i("div",{staticClass:"card-text card-text-ul",domProps:{innerHTML:t._s(e.day_description)}})])})),0)]),t._v(" "),i("div",{staticClass:"modal",attrs:{id:"bookModal"}},[i("div",{staticClass:"modal-dialog"},[i("div",{staticClass:"modal-content modal-color"},[t.itineraryData.itinerarydays?i("div",{staticClass:"modal-body"},[i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")]),t._v(" "),0==t.loading?i("booking",{attrs:{title:t.itineraryData.title,selected_cities:t.selected_cities,city_list:t.city_list}}):t._e()],1):t._e()])])])])}),[],!1,null,null,null);e.default=m.exports}}]);